
| key  | value                                             |
| ---- | ------------------------------------------------- |
| url  | https://atcoder.jp/contests/abc420/tasks/abc420_e |
| tags | #union_find #union_find_extension                    |

## 考察

- 最初、1つも繋がっていない $N$ 個の点が与えられて、「辺を追加する」「あるノードの色を反転する」「あるノードから特定色のノードへの到達可能性を判定する」という3つのクエリによってグラフに対する Write と Read が行われる。
- 辺が繋がっていれば色を抜けば到達可能なので、辺を追加することはノードの集合をマージすることである。
- つまり UnionFind
- ある時点で集合に黒ノードが存在するかどうかはメモ化できるはず
- 頂点 $v$ から黒色ノードへ到達できるか = $v$ が属するノードの集合に黒ノードが1個以上含まれる
- 頂点 $v$ の色を反転する操作の前後で、集合内に黒ノードが存在するかどうかの情報を保持する必要がある、集合内にノードは複数含まれうるので黒ノードの数を保持しておくことで色反転前後の情報保持に耐えられる
- あるいは黒ノードの集合を保持しておいて $v$ と黒ノードのいずれかの

## 実装

